#!/bin/bash

# Uses $1 and sets local RJMS_* vars:
source bin/set-vars

echo "Stop RabbitMQ server (version ${RMQ_VERSION}) after Integration Tests"

if [[ ! -d "${RJMS_RABBITMQ_BASE}" ]] ; then
  echo "Could not find a directory called '${RJMS_RABBITMQ_BASE}'"
  exit 1
fi

(sudo ${RJMS_RABBITMQ_BASE}/sbin/rabbitmqctl -n ${RJMS_RABBITMQ_NODENAME} stop && echo 'RabbitMQ server is stopped') || echo 'RabbitMQ server is not stopped'
